<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: Developing Content Viewer Modules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Autopsy Forensic Browser Developer&#39;s Guide and API Reference</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Developing Content Viewer Modules </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="content_overview"></a>
Overview</h1>
<p>DataContentViewer modules exist in the lower-right area of the default Autopsy interface, as shown below.</p>
<div class="image">
<img src="viewer_image.JPG" alt="viewer_image.JPG"/>
<div class="caption">
Module Viewer Areas</div></div>
<p>They can analyze a single file that the user has identified from either browsing directories, keyword search, etc. It doesn't matter to these modules how the user found the file. These modules allow the user to view the file in various ways. The default program comes with a hex and strings view and other modules exist to display pictures and videos as images instead of just a series of bytes. You would make a new DataContentViewer if you have a unique way of displaying a single file. These modules are passed in a reference to a specific file to display.</p>
<h1><a class="anchor" id="content_nb"></a>
NetBeans Module Configuration</h1>
<p>The rest of the document assumes that you have already created your NetBeans module, as outlined in <a class="el" href="mod_dev_page.html#mod_dev_module">Creating a Basic NetBeans Module</a>.</p>
<p>DataContentViewer modules will have additional NetBeans dependencies. Right click on the module, choose "Properties" -&gt; "Libraries" -&gt; "Module Dependencies". Add "Lookup API" and "Nodes API".</p>
<h1><a class="anchor" id="content_mod"></a>
Module Development</h1>
<p>You will need a class that implements org.sleuthkit.autopsy.corecomponentinterfaces.DataContentViewer and you will need a JPanel to display. We have found the best way to do this is to make a class in the NetBeans IDE that is a "JPanel Form". This will then allow you to use the UI builder within the NetBeans IDE. After NetBeans makes the class for you, then have it implement DataContentViewer. NetBeans will of course complain about missing methods and will provide default implementations for them if you click on the error messages in the UI. Refer to the documentation in org.sleuthkit.autopsy.corecomponentinterfaces.DataContentViewer on what each method should do.</p>
<p>Autopsy will find your module using the NetBeans Lookup infrastructure. To be found, you will need to register as a service provider for DataContentViewer.class by annotating your class as follows:</p>
<div class="fragment"><div class="line">@ServiceProvider(service = DataContentViewer.class)</div><div class="line">public class DataContentViewerString extends javax.swing.JPanel implements DataContentViewer {</div><div class="line">...</div></div><!-- fragment --><p>If you get errors about not knowing about ServiceProviders and such, ensure that you configured your NetBeans module to depend on the Nodes and Lookup APIs as outlined in the previous section.</p>
<h1><a class="anchor" id="content_examples"></a>
Example Modules</h1>
<p>The org.sleuthkit.autopsy.examples.SampleContentViewer class is a very simple module that you can use as a starting point. There are also modules, such as org.sleuthkit.autopsy.corecomponents.DataContentViewerHex and org.sleuthkit.autopsy.corecomponents.DataContentViewerMedia that are real modules, but they are more complex to follow since they have paging and other UI widgets in them.</p>
<h1><a class="anchor" id="content_hints"></a>
Hints</h1>
<h2><a class="anchor" id="content_hints_objects"></a>
Getting Content</h2>
<p>Many of the methods get passed in a Node object as argument. What you really want is one of the Autopsy data model objects from org.sleuthkit.autopsy.datamodel. You get access to these objects from the NetBeans Lookup.</p>
<p>If you only want to analyze files, then you want to get the AbstractFile object from it using: </p><div class="fragment"><div class="line">AbstractFile file = node.getLookup().lookup(AbstractFile.class);</div></div><!-- fragment --><p> If file is null, then it means that the node isn't for a AbstractFile (perhaps its of a full volume). Once you have the AbstractFile object, you can get the file's name, content, and metadata.</p>
<p>If you want to get whatever is passed in, then you can use the more generic lookup: </p><div class="fragment"><div class="line">Content content = node.getLookup().lookup(Content.class);</div></div><!-- fragment --><p> This will get you all types of data model types, but you will not have access to the more specific getter methods. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
