<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: Developing Report Modules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Autopsy Forensic Browser Developer&#39;s Guide and API Reference</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Developing Report Modules </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="report_summary"></a>
Overview</h1>
<p>Report modules allow Autopsy users to create different report types. Autopsy comes with modules to generate HTML and Excel artifact reports, a tab delimited File report, a Keyhole Markup Language (KML) report for Google Earth data, and a body file for timeline creation. You can make additional modules to create custom output formats.</p>
<p>There are three types of reporting modules that differ in how the data is organized.</p><ul>
<li>Table report modules organize the data into tables. If your output is in table format, this type of module will be easier to make because Autopsy does a lot of the organizing work for you.</li>
<li>File report modules are also table-based, but they specifically deal with reporting on the Files in the case, not artifacts.</li>
<li>General report modules are free form and you are allowed to organize the output however you want.</li>
</ul>
<p>Table report modules require their subclasses to override methods to start and end tables, and add rows to those tables. These methods are provided data, generated from a default configuration panel, for the module to report on. Because of this, when creating a table report module one only needs to focus on how to display the data, not how to find it.</p>
<p>File report modules are similar to table report modules, but only require their sub-classes to start and end a single table, and add rows to that table. The methods are given an AbstractFile and a list of FileReportDataTypes, which specify what information about the file should be added to the report. The data can be extracted from the file by calling the FileReportDataTypes getValue method with the file as it's argument.</p>
<p>On the other hand, general report modules have a single method to generate the report. This method gives the module freedom to find and process any data it so chooses. General modules also have the ability to provide a configuration panel, allowing the user to choose from various displayed settings. The report module may then use the user's selection to generate a more specific report.</p>
<p>General modules are also given the responsibility of updating their report's progress bar and processing label in the UI. A progress panel is given to every general report module. It contains basic API to start, stop, and add to the progress bar, as well as update the processing label. The module is also expected to check the progress bar's status occasionally to see if the user has manually canceled the report.</p>
<h1><a class="anchor" id="report_create_module"></a>
Creating a Report Module</h1>
<p>To create a report module, start off by creating a new Java or Python (Jython) class and implementing (Java) or inheriting (Jython) the appropriate interface:</p><ul>
<li>org.sleuthkit.autopsy.report.TableReportModule</li>
<li>org.sleuthkit.autopsy.report.FileReportModule</li>
<li>org.sleuthkit.autopsy.report.GeneralReportModule</li>
</ul>
<p>All three of these interfaces extend the org.sleuthkit.autopsy.report.ReportModule interface that defines the following methods:</p><ul>
<li>org.sleuthkit.autopsy.report.ReportModule.getName()</li>
<li>org.sleuthkit.autopsy.report.ReportModule.getDescription()</li>
<li>org.sleuthkit.autopsy.report.ReportModule.getRelativeFilePath()</li>
</ul>
<p>These methods will be called by Autopsy when it is presenting the reporting UI to a user.</p>
<h2><a class="anchor" id="report_create_module_table"></a>
Creating A Table Report Module</h2>
<p>If you implement TableReportModule, you should override the methods:</p><ul>
<li>org.sleuthkit.autopsy.report.TableReportModule.startReport(String path)</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.endReport()</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.startDataType(String title)</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.endDataType()</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.startSet(String setName)</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.endSet()</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.addSetIndex(List&lt;String&gt; sets)</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.addSetElement(String elementName)</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.startTable(List&lt;String&gt; titles)</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.endTable()</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.addRow(List&lt;String&gt; row)</li>
<li>org.sleuthkit.autopsy.report.TableReportModule.dateToString(long date)</li>
</ul>
<p>When generating table module reports, Autopsy will iterate through a list of user selected data, and call methods such as addRow(List&lt;String&gt; row) for every "row" of data it finds, or startTable(List&lt;String&gt; titles) for every new category it finds. Developers are guaranteed that every start of a data type, set, or table will be followed by an appropriate end. The focus for a table report module should be to take the given information and display it in a user friendly format. See org.sleuthkit.autopsy.report.ReportExcel for an example.</p>
<h2><a class="anchor" id="report_create_module_file"></a>
Creating a File Report Module</h2>
<p>If you implement FileReportModule, the overriden methods will be:</p><ul>
<li>org.sleuthkit.autopsy.report.FileReportModule.startReport(String path)</li>
<li>org.sleuthkit.autopsy.report.FileReportModule.endReport()</li>
<li>org.sleuthkit.autopsy.report.FileReportModule.startTable(List&lt;FileReportDataTypes&gt; headers)</li>
<li>org.sleuthkit.autopsy.report.FileReportModule.endTable()</li>
<li>org.sleuthkit.autopsy.report.FileReportModule.addRow(AbstractFile toAdd, List&lt;FileReportDataTypes&gt; columns)</li>
</ul>
<p>As when generating table module reports, Autopsy will iterate through a list of user selected data (which are represented by FileReportDataTypes), and call addRow(AbstractFile toAdd, List&lt;FileReportDataTypes&gt; columns) for every abstract file in the case. Developers are guaranteed that the order of method calls will be startReport(), startTable(List&lt;FileReportDataTypes&gt; headers), addRow(AbstractFile toAdd, List&lt;FileReportDataTypes&gt; columns), AbstractFile toAdd, List&lt;FileReportDataTypes&gt; columns),..., endTable(), endReport().</p>
<h2><a class="anchor" id="report_create_module_general"></a>
Creating a General Report Module</h2>
<p>If you implement GeneralReportModule, the overriden methods will be:</p><ul>
<li>org.sleuthkit.autopsy.report.GeneralReportModule.generateReport(String reportPath, ReportProgressPanel progressPanel)</li>
<li>org.sleuthkit.autopsy.report.GeneralReportModule.getConfigurationPanel()</li>
</ul>
<p>For general report modules, Autopsy will simply call the generateReport(String reportPath, ReportProgressPanel progressPanel) method and leave it up to the module to aquire and report data in its desired format. The only requirements are that the module saves to the given report path and updates the org.sleuthkit.autopsy.report.ReportProgressPanel as the report progresses.</p>
<p>When updating the progress panel, it is recommended to update it as infrequently as possible, while still keeping the user informed. If your report processes 100,000 files and you chose to update the UI each time a file is reviewed, the UI would freeze when trying to process all your requests. This would cause problems to not only your reporting module, but to other modules running in parallel. A safer approach would be to update the UI every 1,000 files, or when a certain "category" of the files being processed has changed. For example, the HTML report module increments the progress bar and changes the processing label every time a new Blackboard Artifact Type is being processed.</p>
<p>Autopsy will also display the panel returned by getConfigurationPanel() in the generate report wizard. This panel can be used to allow the user custom controls over the report. To make this panel, use NetBeans to make a new JPanel class and use its layout interface to put the UI widgets in the places that you want them. Then, your getConfigurationPanel() method should create an instance of that class and return it.</p>
<p>Typically a general report module should interact with both the Blackboard API in the org.sleuthkit.datamodel.SleuthkitCase class, in addition to an API (possibly external/thirdparty) to convert Blackboard Artifacts to the desired reporting format.</p>
<h2><a class="anchor" id="report_create_module_showing"></a>
Showing Results</h2>
<p>You should call Case.addReport() with the path to your report so that it is shown in the Autopsy tree. You can specify a specific file or folder and the user can then view it later.</p>
<h2><a class="anchor" id="report_create_module_layer"></a>
Installing your Report Module</h2>
<p>Report modules developed using Java must be registered in a layer.xml file. This file allows Autopsy to find the report module.</p>
<p>An example entry in a layer.xml is shown below: </p><div class="fragment"><div class="line">&lt;folder name=<span class="stringliteral">&quot;Services&quot;</span>&gt;</div><div class="line">    &lt;file name=<span class="stringliteral">&quot;org-sleuthkit-autopsy-report-ReportHTML.instance&quot;</span>&gt;</div><div class="line">        &lt;attr name=<span class="stringliteral">&quot;instanceOf&quot;</span> stringvalue=<span class="stringliteral">&quot;org.sleuthkit.autopsy.report.TableReportModule&quot;</span>/&gt;</div><div class="line">        &lt;attr name=<span class="stringliteral">&quot;instanceCreate&quot;</span> methodvalue=<span class="stringliteral">&quot;org.sleuthkit.autopsy.report.ReportHTML.getDefault&quot;</span>/&gt;</div><div class="line">        &lt;attr name=<span class="stringliteral">&quot;position&quot;</span> intvalue=<span class="stringliteral">&quot;910&quot;</span>/&gt;</div><div class="line">    &lt;/file&gt;</div><div class="line">&lt;/folder&gt;</div></div><!-- fragment --><p>In the above example, "org-sleuthkit-autopsy-report-ReportHTML" should be replaced with the package path to your report module.</p>
<p>It is also important to remember to include a getDefault() method in your report module. As shown in the code above, the instance to each report module is accessed via it's getDefault() method. For example:</p>
<div class="fragment"><div class="line"><span class="comment">// Static instance of this report</span></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> MyReport instance;</div><div class="line"></div><div class="line"><span class="comment">// Get the default instance of this report</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> MyReport getDefault() {</div><div class="line">    <span class="keywordflow">if</span> (instance == null) {</div><div class="line">        instance = <span class="keyword">new</span> MyReport();</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> instance;</div><div class="line">}</div></div><!-- fragment --><p>Report modules developed using Jython are installed in Autopsy by placing them in their own subdirectory of the python_modules directory. A window into the python_modules directory can be opened through the Autopsy's Tools -&gt; Python Plugins menu item. Create a folder in this directory and create or place your Python scripts in this folder. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
