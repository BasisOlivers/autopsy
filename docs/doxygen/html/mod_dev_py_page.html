<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: Python Development Setup</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Autopsy Forensic Browser Developer&#39;s Guide and API Reference</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Python Development Setup </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes the basic concepts and setup that are needed for all types of Python modules. It is not needed if you are doing only Java module development.</p>
<p>Autopsy uses Jython (<a href="http://www.jython.org">http://www.jython.org</a>) to enable Python scripting. Jython looks like Python and gets converted into Java byte code and runs on the JVM. Its biggest limitations are:</p><ul>
<li>Limited to Python 2.7 (as of Autopsy 3.1.3)</li>
<li>Can't use Python libraries that have native code</li>
<li>You can't easily make UIs. This means that you can't make content viewer modules or easily have configuration settings for your ingest modules. We have done it, but it is tedious compared to using a Java tool to place UI widgets in various places.</li>
</ul>
<p>Using it is very easy though in Autopsy and it allows you to access all of the Java services and classes that you need.</p>
<p>To develop a module, you should follow this section to get your environment setup and then read the later sections on the different types of modules.</p>
<p>There are also a set of tutorials that Basis Technology published on their blog. While not as thorough as this documentation, they are an easy introduction to the general ideas.</p>
<ul>
<li>File Ingest Modules: <a href="http://www.basistech.com/python-autopsy-module-tutorial-1-the-file-ingest-module/">http://www.basistech.com/python-autopsy-module-tutorial-1-the-file-ingest-module/</a></li>
<li>Data Source Ingest Modules: <a href="http://www.basistech.com/python-autopsy-module-tutorial-2-the-data-source-ingest-module/">http://www.basistech.com/python-autopsy-module-tutorial-2-the-data-source-ingest-module/</a></li>
<li>Report Modules: <a href="http://www.basistech.com/python-autopsy-module-tutorial-3-the-report-module/">http://www.basistech.com/python-autopsy-module-tutorial-3-the-report-module/</a></li>
</ul>
<h1><a class="anchor" id="mod_dev_py_setup"></a>
Basic Setup</h1>
<p>-You don't really need anything to develop a python Autopsy module except for the standard Autopsy and your favorite text editor. We recommend IntelliJ IDEA or the Jython plug-in to NetBeans.</p>
<p>To install NetBeans' plug-in:</p><ol type="1">
<li>Download and install the Jython 2.7 installer to desired location (<a href="http://www.jython.org/downloads.html">http://www.jython.org/downloads.html</a>).</li>
<li>Download NetBeans Python plug-in zip file (<a href="http://plugins.netbeans.org/plugin/56795/python4netbeans802">http://plugins.netbeans.org/plugin/56795/python4netbeans802</a>).</li>
<li>Unpack the content (.nbm files) of the zip file to the desired location.</li>
<li>In NetBeans go to Tools-&gt;Plugins. In Downloaded tab, click on Add Plugins, then choose extracted .nbm files.</li>
<li>Setup Jython path from Tools-&gt;Python Platforms, click on new, then choose Jython.exe (usually in C:/Program files/Jython2.7/bin/)</li>
</ol>
<p>To install IntelliJ IDEA + Python plug-in:</p><ol type="1">
<li>Download java JDK depending on platform. Install to desired location (<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a>).</li>
<li>Download and install IDEA Community Edition to desired location (<a href="https://www.jetbrains.com/idea/download/">https://www.jetbrains.com/idea/download/</a>).</li>
<li>Open IDEA and choose desired UI theme. Continue with default settings.</li>
<li>Choose to either create a new empty project or open an existing one.</li>
<li>It will ask you to modify Project Structure. Leave that for now and click OK.</li>
<li>In File-&gt;Settings. Go to Plugins tab and click on Install JetBrains Plugin.</li>
<li>Look for and install Python Community Edition. After the installation, it will ask you restart. Restart IDEA.</li>
<li>In File-&gt;Project Structure. In Project tab, Project SDK, click on New and choose IntelliJ Platform Plugin SKD.</li>
<li>It will ask you to configure the JKD first, click OK and navigate to the JDK folder location and click OK.</li>
<li>After that it will ask you to choose the IntelliJ Platform Plugin SKD. It will most likely take you to it's locaation automatically. (Usually in C: Files (x86) IDEA Community Edition 14.1.5)</li>
<li>In the drop down menu next to New button, choose IntelliJ IDEA Community Edition.</li>
<li>Still in Project STructure, In Libraries tab, click on '+' to add new libraries. Choose desired autopsy modules (usually in C: Files\Autopsy-3.1.3 if you have executable version).</li>
</ol>
<h1><a class="anchor" id="mod_dev_py_create"></a>
Creating a Basic Python Module</h1>
<h2><a class="anchor" id="mod_dev_py_create_dir"></a>
Packaging Structure</h2>
<p>Autopsy requires that you put all of your Python modules into a single folder. This prevents naming collisions with other modules. You can name the folder what ever you want. You'll need to put all of the libraries that you depend on in there too.</p>
<p>You will need to copy this folder into Autopsy's Python script folder. Autopsy will scan this folder each time it looks for modules. You can find the location of this folder from the "Tools -&gt; Python Scripts" menu item.</p>
<h2><a class="anchor" id="mod_dev_py_create_create"></a>
Module Creation</h2>
<p>We have a growing number of sample Python scripts and therefore the easiest starting point for any Python script is probably to start with one of the public domain examples. This approach is a bit different than what you'd find with Java because the Java environment auto-creates the modules more.</p>
<p>This is the basic approach:</p>
<ol type="1">
<li>Create a folder referenced in <a class="el" href="mod_dev_py_page.html#mod_dev_py_create_dir">Packaging Structure</a>.</li>
<li>Copy one of the sample modules from the github repository (<a href="https://github.com/sleuthkit/autopsy/tree/develop/pythonExamples">https://github.com/sleuthkit/autopsy/tree/develop/pythonExamples</a>)</li>
<li>Edit the sample module by looking for "TODO" references.</li>
</ol>
<p>That's it. Autopsy will find the module each time it needs it and you can make updates without having to restart Autopsy each time.</p>
<h2><a class="anchor" id="mod_dev_py_library"></a>
Using External Libraries</h2>
<p>If you need to bring in a library that is not part of the standard Jython distribution, then do the following:</p>
<ol type="1">
<li>Copy the library file or folder into the folder that you made in mod_dev_py. For example, you may copy in folder called 'neededLib' that has a file named mylib.py in it. The end result be a folder structure such as myModuleFolder/neededLib/mylib.py.</li>
<li>In your Python code, if you needed a class from mylib, then you'd have a line such as: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;from neededLib.mylib <span class="keyword">import</span> neededClass</div></div><!-- fragment --></li>
</ol>
<p>Jython will look in the module's folder to resolve these libraries.</p>
<p>If you bring in a library that uses native code, then you will get a runtime error when you try to load it.</p>
<h2><a class="anchor" id="mod_dev_py_misc"></a>
Minor Gotchas</h2>
<p>This section lists some helpful tips that we have found. These are all now in the sample modules, so refer to those for examples and a place to copy and paste from.</p><ul>
<li>We haven't found a good way to debug while running inside of Autopsy. So, logging becomes critical. You need to go through a bunch of steps to get the logger to display your module name. See the sample module for a log() method that does all of this for you.</li>
<li>When you name the file with your Python module in it, restrict its name to letters, numbers, and underscore (_).</li>
<li>Python modules using external libraries which load native code (SciPy, NumPy, etc.) are currently NOT supported. RuntimeError will be thrown.</li>
</ul>
<h1><a class="anchor" id="mod_dev_py_distribute"></a>
Distribution</h1>
<p>To distribute and share your Python module, ZIP up the folder and send it around. Other users of the module should expand the ZIP file and drop the folder into their Autopsy Python folder. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
